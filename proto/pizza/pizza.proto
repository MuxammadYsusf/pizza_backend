syntax = "proto3";

package pizza;

option go_package = "generated/pizza";
import "google/protobuf/timestamp.proto";

// Advice: Right now, all pizza, cart, and order related RPCs are placed into a single PizzaService.
// For better code organization, maintainability, and scalability, it's a good practice to split your proto into multiple services.
// For example, you could create separate services like PizzaService (for pizza menu and types), CartService (for everything related to cart), and OrderService (for orders and order history).
// This will make your API cleaner and each service will only contain relevant methods for its domain.
service PizzaService{
    rpc CreatePizza(CreatePizzaRequest) returns (CreatePizzaResponse);
    rpc CreatePizzaType(CreatePizzaRequest) returns (CreatePizzaResponse);
    rpc GetPizzas(GetPizzasRequest) returns (GetPizzasResponse);
    rpc GetPizzaById(GetPizzaByIdRequest) returns (GetPizzaByIdResponse);
    rpc UpdatePizza(UpdatePizzaRequest) returns (UpdatePizzaResponse);
    rpc DeletePizza(DeletePizzaRequest) returns (DeletePizzaResponse);
    rpc CheckIsCartExist(CheckIsCartExistRequest) returns (CheckIsCartExistResponse);
    rpc Cart(CartRequest) returns (CartResponse);
    rpc CheckIsOrdered(CheckIsOrderedRequest) returns (CheckIsOrderedResponse);
    rpc OrderPizza(OrderPizzaRequest) returns (OrderPizzaResponse);
    rpc IncreaseAmountOfPizza(CartItems) returns (CartItemsResp);
    rpc DecreaseAmountOfPizza(CartItems) returns (CartItemsResp);
    rpc GetUserHistory(GetCartHistoryRequest) returns (GetCartHistoryResponse);
    rpc GetCartItemHistory(GetCarItemtHistoryRequest) returns (GetCarItemtHistoryResponse);
}

message CreatePizzaRequest {
    string name = 1;
    float price = 2;
    int32 typeId = 3;
}

message CreatePizzaResponse {
    string message = 1;
}

message GetPizzasRequest {
    int32 typeId = 1;
}

message GetPizzasResponse {
    repeated Pizzas pizzas = 1;
}

message Pizzas {
    string name = 1;
    float price = 2;
}

message GetPizzaByIdRequest {
    int32 id = 1;
    int32 typeId = 2;
}

message GetPizzaByIdResponse {
    string name = 1;
    float price = 2;
}

message UpdatePizzaRequest {
    int32 id = 1;
    int32 typeId = 2;
    string name = 3;
    float price = 4;
}

message UpdatePizzaResponse {
    string name = 1;
    float price = 2;
    string message = 3;
}

message DeletePizzaRequest {
    int32 id = 1;
    int32 typeId = 2;

}

message DeletePizzaResponse {
    string message = 1;
}

message CheckIsCartExistRequest {
    int32 userId = 1;
    bool isActive = 2;
    int32 id = 3;
}

message CheckIsCartExistResponse {
    string message = 1;
    bool isActive = 2;
}

message CartRequest {
    int32 id = 1;
    int32 userId = 2;
    bool isActive = 3;
    float totalCost = 4;
    int32 cartItemId = 5;
    int32 pizzaId = 6;
    int32 pizzaTypeId = 7;
    float cost = 8;
    int32 quantity = 9;
    int32 cartId = 10;
    repeated CartItems items = 11;
}

message CartResponse {
    string message = 1;
}

message CheckIsOrderedRequest {
    int32 userId = 1;
    bool isOrdered = 2;
    int32 id = 3;
}

message CheckIsOrderedResponse {
    string message = 1;
    bool isOrdered = 2;
    string status = 3;
}

message OrderPizzaRequest {
    int32 id = 1;
    google.protobuf.Timestamp date = 2;
    bool isOrdered = 3;
    int32 userId = 4;
    string status = 5;
    int32 itemId = 6;
    int32 pizza_id = 7;
    int32 pizza_type_id = 8;
    int32 cart_id = 9;
    int32 quantity = 10;
}

message OrderPizzaResponse {
    string message = 1;
}

message CartItems {
    float totalCost = 1;
    int32 cartItemId = 2;
    int32 pizzaId = 3;
    int32 pizzaTypeId = 4;
    float cost = 5;
    int32 quantity = 6;
    int32 cartId = 7;
    int32 id = 8;  
    int32 userId = 9;
}

message CartItemsResp {
    repeated CartItems cartItems = 1;
    string message = 2;
    int32 cartId = 3;
    int32 pizzaId = 4;  
    float cost = 5; 
}

message GetCartHistoryRequest {
    int32 cartId = 1;
    int32 userId = 2;
}

message GetCartHistoryResponse {
    int32 cartId = 1;
    google.protobuf.Timestamp date = 2;
    int32 userId = 3;
    bool isActive = 4;
    repeated GetCartHistoryResponse cartHistory = 5;
}

message GetCarItemtHistoryRequest {
    int32 cartHistoryId = 1;
}

message GetCarItemtHistoryResponse {
    int32 cartHistoryId = 1;
    int32 pizzaId = 2;
    int32 pizzaTypeId = 3;
    float cost = 4;
    int32 quantity = 5;
    repeated GetCarItemtHistoryResponse cartHistory = 6;
}



